<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MyButton UMD Test</title>
  <!-- <script src="../dist/sf-button.js"></script> -->
  <script src="../dist/sf-cart-page.js"></script>
  <script>
    function init() {
      console.log(SFCartPage);
      // SFButton?.render({
      //   container: document.getElementById('button1'),
      //   label: 'My Button',
      //   onClick: () => alert('Button clickedeeee!'),
      //   // customRender: (props, element) => {
      //   //   console.log('Custom render called with props:', props);
      //   //   const button = document.createElement('button');
      //   //   button.textContent = props.label + 'crrrr';
      //   //   button.onclick = () => alert('asdasdsad clickedeeee!');
      //   //   element.replaceWith(button);
      //   // },
      // });

      // Mock data for demonstration
      const initialCart = [
        {
          id: 1,
          product: {
            name: 'Product 1',
            link: '#',
            imageSrc: 'https://via.placeholder.com/120x120/4caf50/ffffff?text=Product+1',
            imageAlt: 'Product 1',
            price: '10.99',
          },
          quantity: 4,
        },
        {
          id: 2,
          product: {
            name: 'Product 1',
            link: '#',
            imageSrc: 'https://via.placeholder.com/120x120/4caf50/ffffff?text=Product+1',
            imageAlt: 'Product 1',
            price: '10.99',
          },
          quantity: 1,
        },
        {
          id: 3,
          product: {
            name: 'Product 2',
            link: '#',
            imageSrc: 'https://via.placeholder.com/120x120/2196f3/ffffff?text=Product+2',
            imageAlt: 'Product 2',
            price: '20.99',
          },
          quantity: 1,
        },
      ];

      // Initialize the Zustand store with the cart data
      if (window.cartStore) {
        window.cartStore.initializeCart(initialCart);
        console.log('Cart initialized in Zustand store:', window.cartStore.getCart());
      }

      SFCartPage?.render({
        container: document.getElementById('cart1'),
        // Cart data and callbacks are now handled by Zustand store
        afterDecorate: (props, element) => {
          console.log('Custom render called with props:', element);

          element.querySelectorAll('.cart-item').forEach(item => {
            // create dive element with text
            const customText = document.createElement('div');
            customText.innerText = 'Custom text added after decoration'
            customText.style.color = 'red';
            customText.style.fontWeight = 'bold';
            customText.style.marginTop = '10px';
            customText.style.fontSize = '14px';

            item.querySelector('.product-info__details').appendChild(customText);
          });
        },
      });
    }
  </script>
</head>
<body onload="init()">
  <div id="button1"></div>
  <div id="cart1"></div>
</body>
</html> 